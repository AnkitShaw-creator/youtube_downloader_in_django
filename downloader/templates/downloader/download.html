<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

    <title>Download</title>
</head>
<body>
    <div class="container">
        <br><br>
        <h1>Here is your download link!</h1> <br><br>
        <img src="{{ meta_data.thumbnail_url }}" alt="" class="rounded mx-auto d-block">
        <br><br>
        <div class="alert alert-danger" role="alert">
            <h3>{{ message }}</h3>
        </div>
        <br><br>
        <form action="" method="get" class="form-control">
            <br>
            <label for="title">Title: </label>
            <input class="form-control" type="text" name="title" id="title" value="{{ meta_data.title }}" disabled ><br>
        
            <label for="rating">Rating: </label>
            <input class="form-control" type="text" name="title" id="title" value="{{ meta_data.rating }}" disabled><br>
        
            <label for="rating">Author: </label>
            <input class="form-control" type="text" name="rating" id="rating" value="{{ meta_data.rating }}" disabled><br>
        
            <label for="age_restricted">Age retricted: </label>
            <input type="checkbox" name="age_restricted" id="age_restricted" disabled {% if meta_data.age_restricted %} checked
                {% endif %}>
                <br>
                <br>
            <label for="rating">Length(in sec): </label>
            <input class="form-control" type="text" name="length" id="length" value="{{ meta_data.length }}" disabled><br>
        </form>
        <br><br>
        <div class="alert alert-info" role="alert">
            <h5>Please click on the download link beside the video resolution of your choice. The video would be downloaded
            at your desktop location by default with the name same as video title.</h5>
        </div>
        <br><br>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th scope="col">Resolution</th>
                    <th scope="col"> Progressive</th>
                    <th scope="col"> Mime type</th>
                    <th scope="col">Download Link</th>
                </tr>
            </thead>
            <tbody>
                {% for i in rsl %}
                <tr>
                    <td>{{i.resolution}}</td>
                    <td>{% if i.Progressive %} Yes {% else %} No {% endif %}</td>
                    <td>{{ i.mime_type }}</td>
                    <td>
                        <form action="" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="i_tag" value="{{ i.itag }}">
                            <button type="submit" class="btn btn-outline-success">Download</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    

</body>
</html>